<launch>
  <group>  
  
    <!-- Unfortunately the tag 'env' to evaluate expresions does not work and we need to create bool args -->
  
    <arg name="xr1" default="false"/>
    <arg name="xr2" default="false"/>
    <arg name="xr3" default="false"/>    
    <include file="$(find ros_win_bridge)/launch/xr1.launch" if="$(arg xr1)" />
    <include file="$(find ros_win_bridge)/launch/xr2.launch" if="$(arg xr2)" />
    <include file="$(find ros_win_bridge)/launch/xr3.launch" if="$(arg xr3)" />

    <arg name="real_localization" default="false"/>
    <arg name="localization_off" default="false"/>
    <!-- Default: fake localization -->
        
    
    <arg name="dof7" default="true"/>
    <arg name="rviz" default="false"/>
    <arg name="camera" default="true"/>

    <include file="$(find omip_launch)/launch/asus_mounted_on_xr4000.launch" if="$(arg camera)"/>
    <!-- <include file="$(find omip_launch)/launch/asus_mounted_on_xr4000_playback.launch" unless="$(arg camera)"/> -->
    
    
    <!-- Using groups to evaluate several bools -->
    <group if="$(arg dof7)">        
      <node pkg="tf" type="static_transform_publisher" name="fake_odometry" args="0.0 0.0 0 0 0.0 0.0 /odom /base_link  100" />
      <include file="$(find rbo_wam_description)/launch/rbo_wam_softhand_right_state_publisher.launch"/>
      <group if="$(arg rviz)"> 
        <node name="visualization" pkg="rviz" type="rviz" output="screen" args="-d $(find omip_launch)/cfg/omip.rviz" />          
      </group>   
    </group>
   
    
    <group unless="$(arg dof7)">
      <include file="$(find joint_state_renamer)/launch/rename_uman_rlab_to_ros.launch"/>
      <include file="$(find xr4000wam_description)/launch/robot_state_publisher.launch"/>
      <group if="$(arg rviz)"> 
        <node name="visualization" pkg="rviz" type="rviz" output="screen" args="-d $(find omip_launch)/cfg/omip.rviz" />                
      </group>   
    </group>
    
    <node pkg="tf" type="static_transform_publisher" name="sensor_broadcaster" args="0.0 0.26 0.54 0 0 0.70710678118 0.70710678118 /base_link /laser  100" />
    
    <group unless="$(arg localization_off)">        
      <node pkg="map_server" type="map_server" name="map_server" args="$(find omip_launch)/maps/lockbox_berlin.yaml"/>
      <group if="$(arg real_localization)"> 
          <node pkg="sicktoolbox_wrapper" type="sicklms" name="laser_scanner" args="_port:=/dev/ttyUSB0 _baud:=38400 _resolution:=0.0001"/>
          <include file="$(find omip_launch)/launch/2d_localization_robotbase.launch"/>
      </group>
      
      <group unless="$(arg real_localization)">        
          <node pkg="tf" type="static_transform_publisher" name="fake_localization" args="0.35 -0.8 0.0 0 0 0 1 /map /odom  100" />
      </group>
    </group>
  </group>
</launch> 
